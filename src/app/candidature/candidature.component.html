<!DOCTYPE html>
<html lang="en">
<body class="bg-gray-200">
  <div class="container position-sticky z-index-sticky top-0">
    <div class="row">
      <div class="col-">
        <app-header></app-header>
      </div>
    </div>
  </div>

  <main class="main-content position-relative max-height-vh-100 h-100 border-radius-lg ">
    <br><br>
    <div class="container-fluid py-4">
      <main class="main-content mt-0">
        <div class="page-header align-items-start min-vh-100" style="background-image: url('../../assets/Assurance back.jpg')">
          <span class="mask bg-gradient-dark opacity-3"></span>
          <div class="container my-auto">
            <div class="row">
              <div class="col-lg-12 col-md-6 col-8 mx-auto">
                <div class="card z-index-0 fadeIn3 fadeInBottom">
                  <div class="card-body">
                    <form [formGroup]="form">
                      <div class="row">
                        <div class="col-lg-6">
                          <label class="form-label">Nom</label>
                          <p class="input-group input-group-outline mb-3">
                            <input type="text" class="form-control" formControlName="nom">
                          </p>
                          <div *ngIf="form.controls['nom'].invalid && form.controls['nom'].touched" class="text-danger">
                            Nom est requis.
                          </div>
                        </div>

                        <div class="col-lg-6">
                          <label class="form-label">Prénom</label>
                          <p class="input-group input-group-outline mb-3">
                            <input type="text" class="form-control" formControlName="prenom">
                          </p>
                          <div *ngIf="form.controls['prenom'].invalid && form.controls['prenom'].touched" class="text-danger">
                            Prénom est requis.
                          </div>
                        </div>
                      </div>

                      <div class="row">
                        <div class="col-lg-6">
                          <label class="form-label">Email</label>
                          <p class="input-group input-group-outline my-3">
                            <input type="email" class="form-control" formControlName="Email">
                          </p>
                          <div *ngIf="form.controls['Email'].invalid && form.controls['Email'].touched" class="text-danger">
                            Un email valide est requis.
                          </div>
                        </div>

                        <div class="col-lg-6">
                          <label class="form-label">Numéro de Téléphone</label>
                          <p class="input-group input-group-outline mb-3">
                            <input type="number" class="form-control" formControlName="NumTel">
                          </p>
                          <div *ngIf="form.controls['NumTel'].invalid && form.controls['NumTel'].touched" class="text-danger">
                            Numéro de téléphone est requis.
                          </div>
                        </div>
                      </div>

                      <div class="row">
                        <div class="col-lg-6">
                          <label class="form-label">Niveau</label>
                          <p class="input-group input-group-outline mb-3">
                            <select class="form-control" formControlName="niveau">
                              <option value="Bac+3(license)">Bac+3(license)</option>
                              <option value="Bac+5(Master)">Bac+5(Master)</option>
                              <option value="Bac+6(ingénieur)">Bac+6(ingénieur)</option>
                            </select>
                          </p>
                          <div *ngIf="form.controls['niveau'].invalid && form.controls['niveau'].touched" class="text-danger">
                            Niveau est requis.
                          </div>
                        </div>

                        <div class="col-lg-6">
                          <label class="form-label">Type de stage</label>
                          <p>
                            <select class="form-select" formControlName="typedestage">
                              <option value="stage-ete">Stage d'été</option>
                              <option value="stage-preembauche">Stage préembauche</option>
                              <option value="stage-ingenieur">Stage d'ingénieur</option>
                            </select>
                          </p>
                          <div *ngIf="form.controls['typedestage'].invalid && form.controls['typedestage'].touched" class="text-danger">
                            Type de stage est requis.
                          </div>
                        </div>
                      </div>

                      <div class="row">
                        <div class="col-lg-6">
                          <label class="form-label">Contact</label>
                          <p class="input-group input-group-outline mb-3">
                            <select class="form-control" formControlName="contact">
                              <option value="Linkedin">Linkedin</option>
                              <option value="Facebook">Facebook</option>
                              <option value="TaniJob">TaniJob</option>
                              <option value="à travers un ami">à travers un ami</option>
                            </select>
                          </p>
                          <div *ngIf="form.controls['contact'].invalid && form.controls['contact'].touched" class="text-danger">
                            Contact est requis.
                          </div>
                        </div>
                      </div>

                      <div class="row">
                        <div class="col-lg-6">
                          <label>CV</label>
                          <input type="file" class="form-control" (change)="handleFileInput($event, 'cv')">
                          <div *ngIf="form.controls['fileCV'].invalid && form.controls['fileCV'].touched" class="text-danger">
                            CV est requis.
                          </div>
                        </div>

                        <div class="col-lg-6">
                          <label>Lettre De Motivation</label>
                          <input type="file" class="form-control" (change)="handleFileInput($event, 'lm')">
                          <div *ngIf="form.controls['fileLM'].invalid && form.controls['fileLM'].touched" class="text-danger">
                            Lettre de motivation est requise.
                          </div>
                        </div>
                      </div>

                      <div class="row mt-4">
                        <div class="col-lg-12">
                          <label>Captcha</label>
                          <div>
                            <b>{{ captchaText }}</b>
                          </div>
                          <p class="input-group input-group-outline mb-3">
                            <input type="text" class="form-control" formControlName="captchaEntered" maxlength="5">
                          </p>
                          <div *ngIf="form.controls['captchaEntered'].invalid && form.controls['captchaEntered'].touched" class="text-danger">
                            Le captcha est requis.
                          </div>
                          <button type="button" (click)="validateCaptcha()" class="btn btn-success">Validate</button>
                          <button type="button" (click)="generateCaptcha()" class="btn btn-warning">Reload</button>
                        </div>
                      </div>

                      <div class="text-center">
                        <button  (click)="AddCandidature()" class="btn btn-primary">s'enregistrer</button>
                      </div>
                      <div *ngIf="candidatureEnregistree" class="alert alert-success mt-4" role="alert">
                        Candidature enregistrée avec succès!
                      </div>
                    </form>

                    <p class="mt-4 text-sm text-center">
                      Don't have an account?
                      <a href="../pages/sign-up.html" class="text-primary text-gradient font-weight-bold">Sign up</a>
                    </p>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </main>
    </div>
  </main>
</body>
</html>
